<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="manifest" href="./manifest.webmanifest">
  <title>Optimizer (PWA Bridge)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Arial;
           margin: 0; padding: 16px; line-height: 1.5; }
    .wrap { max-width: 980px; margin: 0 auto; }
    .hint { color: #6b7280; font-size: 12px; }
    .pill { display:inline-block; border:1px solid #e5e7eb; border-radius:999px; padding:2px 8px; }
  </style>
</head>
<body>
  <main class="wrap">
    <h1>Optimizer (PWA)</h1>
    <p class="hint">í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì…ë‹ˆë‹¤. ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ grade/processë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/>
    ì˜ˆ) <code>?grade=CA1180P&amp;process=extrusion</code></p>

    <div id="state"></div>

    <hr/>
    <p class="hint">
      ğŸ‘‰ <b>ì™„ì „ í†µí•© ë°©ë²•</b><br/>
      (1) ì—¬ê¸° íŒŒì¼ì˜ ì „ì²´ ë‚´ìš©ì„ ì§€ìš°ê³ , ZIPì˜ <code>index.html</code> ì „ì²´ë¥¼ ë¶™ì—¬ ë„£ìœ¼ì„¸ìš”.<br/>
      (2) <b>ì•„ë˜ "ì£¼ì… ìŠ¤ë‹ˆí«"</b>ì„ <code>&lt;/body&gt;</code> ë°”ë¡œ ìœ„ì— ì¶”ê°€í•˜ì„¸ìš”.<br/>
      (3) <code>sw.js</code>, <code>manifest.webmanifest</code>ëŠ” ê·¸ëŒ€ë¡œ ë‘¬ë„ ë©ë‹ˆë‹¤(í•„ìš”ì‹œ êµì²´ ê°€ëŠ¥).
    </p>
  </main>

  <!-- (ì„ì‹œ) í”„ë¦¬ë¡œë“œ: grade/process ì¿¼ë¦¬ ë°˜ì˜ + rebuildForm í˜¸ì¶œ -->
  <script>
    (function(){
      function preselectFromQuery(){
        try{
          var p = new URLSearchParams(location.search);
          var g = p.get('grade') || '';
          var proc = p.get('process') || '';
          var s = document.getElementById('state');
          s.innerHTML =
            '<div class="pill">grade: <b>'+(g||'-')+'</b></div> '+
            '<div class="pill">process: <b>'+(proc||'-')+'</b></div><br/>'+
            '<div class="hint">â€» ì‹¤ì œ PWAë¥¼ ë¶™ì´ë©´, ì´ ê°’ìœ¼ë¡œ ì´ˆê¸° ì„ íƒ í›„ rebuildForm()ì´ í˜¸ì¶œë©ë‹ˆë‹¤.</div>';

          // ì‹¤ì œ PWAê°€ ë¡œë“œë˜ë©´ ì•„ë˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.
          if (typeof rebuildForm === 'function') { rebuildForm(); }
        }catch(e){}
      }
      window.addEventListener('DOMContentLoaded', preselectFromQuery);
    })();
  </script>
</body>
</html>
